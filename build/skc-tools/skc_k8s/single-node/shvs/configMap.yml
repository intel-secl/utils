# Copyright (C) 2021  Intel Corporation
# SPDX-License-Identifier: BSD-3-Clause

apiVersion: v1
kind: ConfigMap
metadata:
  name: shvs-db-config
  namespace: isecl
data:
  pg_hba.conf: |
    local  all  all md5
    hostssl pgshvsdb shvsdbuser 10.1.0.0/16 md5
  postgresql.conf: |
    listen_addresses = '*'
    port = 5432
    ssl = on
    ssl_cert_file = '/etc/postgresql/secrets/server.crt'
    ssl_key_file = '/etc/postgresql/secrets/server.key'
    ssl_ciphers = 'ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256'
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: shvs-config
  namespace: isecl
data:
  AAS_API_URL: https://aas-svc.isecl.svc.cluster.local:8444/aas/v1
  CMS_BASE_URL: https://cms-svc.isecl.svc.cluster.local:8445/cms/v1
  SCS_BASE_URL: https://scs-svc.isecl.svc.cluster.local:9000/scs/sgx/
  CMS_TLS_CERT_SHA384:
  SAN_LIST:
  BEARER_TOKEN:
  SHVS_DB_HOSTNAME: shvsdb-svc.isecl.svc.cluster.local
  SHVS_DB_NAME: pgshvsdb
  SHVS_DB_SSLCERTSRC: /etc/postgresql/server.crt
  SHVS_DB_PORT: "5432"
  SHVS_LOGLEVEL: info
  SHVS_HOST_PLATFORM_EXPIRY_TIME: "240"
