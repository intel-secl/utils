# Copyright (C) 2021  Intel Corporation
# SPDX-License-Identifier: BSD-3-Clause

apiVersion: v1
kind: ConfigMap
metadata:
  name: scs-db-config
  namespace: isecl
data:
  pg_hba.conf: |
    local  all  all md5
    hostssl pgscsdb scsdbuser 10.1.0.0/16 md5
  postgresql.conf: |
    listen_addresses = '*'
    port = 5432
    ssl = on
    ssl_cert_file = '/etc/postgresql/secrets/server.crt'
    ssl_key_file = '/etc/postgresql/secrets/server.key'
    ssl_ciphers = 'ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256'
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: scs-config
  namespace: isecl
data:
  AAS_API_URL: https://aas-svc.isecl.svc.cluster.local:8444/aas/v1
  CMS_BASE_URL: https://cms-svc.isecl.svc.cluster.local:8445/cms/v1
  CMS_TLS_CERT_SHA384:
  INTEL_PROVISIONING_SERVER: https://sbx.api.trustedservices.intel.com/sgx/certification/v3
  INTEL_PROVISIONING_SERVER_API_KEY:
  SAN_LIST:
  BEARER_TOKEN:
  SCS_DB_HOSTNAME: scsdb-svc.isecl.svc.cluster.local
  SCS_DB_NAME: pgscsdb
  SCS_DB_SSLCERTSRC: /etc/postgresql/server.crt
  SCS_DB_PORT: "5432"
  SCS_LOGLEVEL: info
