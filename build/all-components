TARGETS = intel-secl

all: clean download-eca $(TARGETS)
	mkdir -p binaries
	cp intel-secl/deployments/installer/*.bin binaries/
	cp intel-secl/deployments/installer/*.sh binaries/
	cp intel-secl/installer/isecl-k8s-extensions-v*.tar.gz binaries/
	cp intel-secl/tools/aas-manager/populate-users.env binaries/env

download-eca:
	cd intel-secl && make download-eca && cd -

clean: $(patsubst %, %-clean, $(TARGETS))
	rm -rf binaries/

$(TARGETS):
	cd $@ && make installer

%-clean:
	cd $* && make clean

.PHONY: all clean $(TARGETS)
